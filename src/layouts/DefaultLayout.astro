---
import BaseHead from '../components/BaseHead.astro';
import AppBar from '../components/AppBar.jsx';

const {content} = Astro.props;
const {title, description} = content || false

const key = "BZX4R4Dr8Y6rnegRb9YaPwtt";
const cacheBuster = new Date().getMilliseconds();
const settings = await fetch(
  `https://api.storyblok.com/v2/cdn/stories/settings?token=${key}&cv=${cacheBuster}`
)
  .then((response) => response.json())
---
<html lang="en">

  <head>
    <BaseHead title={title} description={description} />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <style lang="scss" global>
      @import "../css/base.scss";
    </style>
  </head>

  <body>

    <aside class="mdc-drawer mdc-drawer--modal">
      <div class="mdc-drawer__content">
        <nav class="mdc-list">
          <a class="mdc-list-item mdc-list-item--activated" href="#" aria-current="page" tabindex="0">
            <span class="mdc-list-item__ripple"></span>
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">inbox</i>
            <span class="mdc-list-item__text">Inbox</span>
          </a>
          <a class="mdc-list-item" href="#">
            <span class="mdc-list-item__ripple"></span>
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">send</i>
            <span class="mdc-list-item__text">Outgoing</span>
          </a>
          <a class="mdc-list-item" href="#">
            <span class="mdc-list-item__ripple"></span>
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">drafts</i>
            <span class="mdc-list-item__text">Drafts</span>
          </a>
        </nav>
      </div>
    </aside>
    <div class="mdc-drawer-scrim"></div>

    <AppBar blok={settings.story.content}/>
    
    <main class="mdc-top-app-bar--fixed-adjust">
      <slot/>
    </main>
    
  </body>

</html>

