---
import DefaultLayout from "../layouts/DefaultLayout.astro"
import Component from "../components/Component.jsx"
export async function getStaticPaths() {
  const key = "BZX4R4Dr8Y6rnegRb9YaPwtt"
  const cacheBuster = new Date().getMilliseconds()
  const data = await fetch(`https://api.storyblok.com/v2/cdn/stories/?token=${key}&cv=${cacheBuster}`)
    .then(response => response.json());

  return data.stories.map((page) => {
    return {
      params: { slug: page.slug },
      props: { page }
    };
  });
}

const {page} = Astro.props;
---
<DefaultLayout title="Title" description="Description">
  {page.content.body.map(child => {
    return <Component blok={child}/>
  })}
</DefaultLayout>

<style lang="scss" global>
	main {
		--vertical-margins: 2rem;
		> :not(.full-width):not(.spacer) {
			margin: var(--vertical-margins) auto;
			max-width: calc(100% - 1rem);
			@media (min-width: 640px) {
				max-width: calc(100% - 2rem);
			}
			@media (min-width: 768px) {
				max-width: 90vw;
			}
			@media (min-width: 1333px) {
				max-width: 1200px;
			}
			&.link.button,
			&.dialog {
				display: block;
			}
		}
	}
</style>